# Data Management & Consistency

## مدیریت داده و سازگاری

مدیریت درست داده‌ها در معماری توزیع‌شده بسیار حیاتی است. این بخش تضمین می‌کند که هر میکروسرویس مالک داده‌های خود باشد و مسئله سازگاری داده‌ها به دقت مد نظر قرار گیرد.

---

## General Principles

### اصول کلی

- [ ] آیا هر میکروسرویس پایگاه داده مخصوص به خودش را دارد؟ (الگوی Database per Service)
- [ ] آیا از تماس‌های مستقیم بین پایگاه داده‌های سرویس‌ها خودداری شده است؟
- [ ] آیا مدل‌سازی داده‌ها با Bounded Context سرویس هماهنگ است؟

---

## Data Consistency

### سازگاری داده‌ها

- [ ] آیا مفهوم سازگاری نهایی (Eventual Consistency) به روشنی پذیرفته و در صورت نیاز مدیریت می‌شود؟
- [ ] آیا از الگوهایی مثل SAGA Pattern یا Outbox Pattern برای مدیریت تراکنش‌های توزیع‌شده استفاده شده است؟
- [ ] آیا اقدامات جبرانی (Compensating Actions) برای تراکنش‌های بلندمدت یا شکست‌خورده تعریف شده است؟

---

## Data Sharing

### اشتراک داده‌ها

- [ ] آیا سرویس‌ها از ارتباط غیرهمزمان (Asynchronous Communication) مانند رویدادها برای به اشتراک‌گذاری تغییرات وضعیت استفاده می‌کنند؟
- [ ] آیا استراتژی‌ای برای انتشار رویدادهای دامنه (Domain Events) مثل استفاده از پیام‌رسان‌هایی مانند Kafka یا RabbitMQ وجود دارد؟
- [ ] آیا مصرف‌کنندگان رویدادها Idempotent هستند (یعنی دریافت چندباره رویدادها مشکلی ایجاد نمی‌کند) و در برابر رویدادهای تکراری مقاوم‌اند؟

---

## Read Models & Querying

### مدل‌های خواندن و پرس‌وجو

- [ ] آیا CQRS - Command Query Responsibility Segregation در مواقع لازم پیاده‌سازی شده است؟
- [ ] آیا مدل‌های خواندن با مکانیزم‌های رویدادمحور (event-driven)‌ به‌روز می‌شوند؟
- [ ] آیا از Materialized Views یا projections برای بهینه‌سازی خواندن داده استفاده می‌شود؟

---

## Data Ownership & Retention

### مالکیت و نگهداری داده‌ها

- [ ] آیا سیاست‌های نگهداری داده (retention policies) برای هر سرویس تعریف و اعمال شده است؟
- [ ] آیا استراتژی‌های آرشیو و حذف داده‌ها با الزامات کسب‌وکار و قوانینی مثل GDPR منطبق است؟

---

## Data Security & Access

### امنیت داده‌ها و دسترسی

- [ ] آیا فیلدهای حساس داده‌ها در حالت استراحت (At Rest) و در انتقال (In Transit) رمزنگاری شده‌اند؟
- [ ] آیا کنترل دسترسی سطح ردیف یا فیلد در صورت نیاز پیاده‌سازی شده است؟
- [ ] آیا اسرار (مثل اعتبارنامه‌های دیتابیس، کلیدها) به صورت امن ذخیره می‌شوند؟ (مثلاً HashiCorp Vault یا AWS Secrets Manager)

---

## Schema Management

### مدیریت اسکیمای داده

- [ ] آیا schema migration با ابزارهای کنترل نسخه مانند EF Core Migrations ،Flyway یا Liquibase مدیریت می‌شوند؟
- [ ] آیا تغییرات اسکیمای داده به‌صورت سازگار به عقب (Backward-compatible) بوده و تست شده‌اند؟
- [ ] آیا برنامه‌ای برای برگشت به حالت قبلی (Rollback) در صورت شکست data migration وجود دارد؟

---

## بازگشت به صفحه اصلی

[← بازگشت به فهرست چک‌لیست‌ها](index.md)
